<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wrappers • distr6</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Wrappers">
<meta property="og:description" content="">
<meta property="og:image" content="https://alan-turing-institute.github.io/distr6/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">distr6</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basic
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/intro_to_r6.html">Introduction to R6</a>
    </li>
    <li>
      <a href="../../articles/webs/constructing_a_distribution.html">Constructing a Distribution</a>
    </li>
    <li>
      <a href="../../articles/webs/parameters.html">Getting and Setting Parameters</a>
    </li>
    <li>
      <a href="../../articles/webs/statistical_methods.html">Statistical Methods</a>
    </li>
    <li>
      <a href="../../articles/webs/properties_traits.html">Properties and Traits</a>
    </li>
    <li>
      <a href="../../articles/webs/multivariates.html">Multivariate Distributions</a>
    </li>
    <li>
      <a href="../../articles/webs/listing.html">Listing</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/s3_piping.html">S3 and Piping</a>
    </li>
    <li>
      <a href="../../articles/webs/decorators.html">Decorators</a>
    </li>
    <li>
      <a href="../../articles/webs/wrappers.html">Wrappers</a>
    </li>
    <li>
      <a href="../../articles/webs/sets.html">Sets and Intervals</a>
    </li>
    <li>
      <a href="../../articles/webs/custom_distributions.html">Custom Distributions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extension Guidelines
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/preliminaries.html">Preliminaries</a>
    </li>
    <li>
      <a href="../../articles/webs/create_sdistribution.html">Creating an SDistribution</a>
    </li>
    <li>
      <a href="../../articles/webs/create_kernel.html">Creating a Kernel</a>
    </li>
    <li>
      <a href="../../articles/webs/create_decorator.html">Creating a Decorator</a>
    </li>
    <li>
      <a href="../../articles/webs/create_wrapper.html">Creating a Wrapper</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendices
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://raphaels1.github.io/pdfs/distr6Cheatsheet.pdf">Cheatsheet</a>
    </li>
    <li>
      <a href="../../articles/webs/api_lifecycle.html">API Lifecycle</a>
    </li>
    <li>
      <a href="../../articles/webs/analytic_and_numeric_methods.html">Analytical and Numerical Methods</a>
    </li>
    <li>
      <a href="../../articles/webs/r_vs_c.html">R vs C</a>
    </li>
    <li>
      <a href="../../articles/webs/r6_and_design_patterns.html">R6 and Design Patterns</a>
    </li>
    <li>
      <a href="../../articles/webs/documentation_in_r6.html">Documentation in R6</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../reference/">Reference</a>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/RaphaelS1/distr6">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Wrappers</h1>
            
            <h4 class="date">2019-08-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/alan-turing-institute/distr6/blob/master/vignettes/webs/wrappers.rmd"><code>vignettes/webs/wrappers.rmd</code></a></small>
      <div class="hidden name"><code>wrappers.rmd</code></div>

    </div>

    
    
<p>The <a href="https://alan-turing-institute.github.io/distr6/articles/webs/decorators.html">previous tutorial</a> introduced decorators in distr6. These are used to add numeric and more complex methods to the distribution interface. Wrappers are the next big distr6 feature and serve a similar purpose.</p>
<div id="wrappers" class="section level2">
<h2 class="hasAnchor">
<a href="#wrappers" class="anchor"></a>Wrappers</h2>
<p>Just like decorators, wrappers are a design pattern commonly used in object-oriented programming. For people interested in these principles, we are specifically using the ‘Adapter’ pattern from Design Patterns <span class="citation">(Gamma et al. 1994)</span>. Instead of simply adding methods, as decorators do, wrappers also slightly alter the interface of the object and usually result in a slightly different object being created. For example,</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(Normal<span class="op">$</span><span class="kw">new</span>())</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co">#&gt; [1] "Normal"        "SDistribution" "Distribution"  "R6"</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="kw"><a href="../../reference/truncate.html">truncate</a></span>(Normal<span class="op">$</span><span class="kw">new</span>()))</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt; [1] "TruncatedDistribution" "DistributionWrapper"   "Distribution"         </span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt; [4] "R6"</span></a></code></pre></div>
<p>See how the Normal distribution becomes an object of class <code>TruncatedDistribution</code> which in itself is of class <code>DistributionWrapper</code>. This tells the machine to expect a slightly different interface but it still recognises the original Normal distribution that is being wrapped.</p>
</div>
<div id="accessing-wrapped-models" class="section level2">
<h2 class="hasAnchor">
<a href="#accessing-wrapped-models" class="anchor"></a>Accessing Wrapped Models</h2>
<p>All wrappers share a common method <code><a href="../../reference/wrappedModels.html">wrappedModels()</a></code>. More often than not this is used internally but it’s still useful if you want to remind yourself of the original wrapped model.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="../../reference/truncate.html">truncate</a></span>(Normal<span class="op">$</span><span class="kw">new</span>(),<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)<span class="op">$</span><span class="kw"><a href="../../reference/wrappedModels.html">wrappedModels</a></span>()</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt; $Norm</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; Norm(mean = 0, var = 1)</span></a></code></pre></div>
<p>You can also specify the name of the internal model to access it,</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../../reference/truncate.html">truncate</a></span>(Normal<span class="op">$</span><span class="kw">new</span>(),<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)<span class="op">$</span><span class="kw"><a href="../../reference/wrappedModels.html">wrappedModels</a></span>(<span class="st">"Norm"</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; Norm(mean = 0, var = 1)</span></a></code></pre></div>
<p>A slightly quicker approach is to use the <code>description</code> variable which is updated each time a distribution is wrapped</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../../reference/truncate.html">truncate</a></span>(Normal<span class="op">$</span><span class="kw">new</span>(),<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)<span class="op">$</span>description</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; [1] "Normal Probability Distribution. Truncated between -1 and 1."</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw"><a href="../../reference/huberize.html">huberize</a></span>(<span class="kw"><a href="../../reference/truncate.html">truncate</a></span>(Normal<span class="op">$</span><span class="kw">new</span>(),<span class="op">-</span><span class="dv">3</span>,<span class="dv">3</span>),<span class="op">-</span><span class="dv">2</span>,<span class="dv">2</span>)<span class="op">$</span>description</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; [1] "Normal Probability Distribution. Truncated between -3 and 3. Huberized between -2 and 2."</span></a></code></pre></div>
<p>Or finally just look at the new distribution name</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../../reference/huberize.html">huberize</a></span>(<span class="kw"><a href="../../reference/truncate.html">truncate</a></span>(Normal<span class="op">$</span><span class="kw">new</span>(),<span class="op">-</span><span class="dv">3</span>,<span class="dv">3</span>),<span class="op">-</span><span class="dv">2</span>,<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt; HubTruncNorm(TruncNorm_Norm_mean = 0, TruncNorm_Norm_var = 1)</span></a></code></pre></div>
</div>
<div id="wrappers-in-distr6" class="section level2">
<h2 class="hasAnchor">
<a href="#wrappers-in-distr6" class="anchor"></a>Wrappers in distr6</h2>
<p>There are currently 8 wrappers in distr6, these can be listed with <code><a href="../../reference/listWrappers.html">listWrappers()</a></code>. They can be sectioned into two groups: composite wrappers and transformer wrappers. Composite wrappers create composite distributions, i.e. distributions that use internal functions to combine multiple distributions. Transformation wrappers perform some form of transformation on the distribution, e.g. scaling the distribution to a given mean or variance. We will look at three of these in detail and hopefully understanding the others will follow intuitively.</p>
<p>Note: The Convolution and Scale wrappers are still in an experimental lifecycle, meaning that we are aware they may be sub-optimal or bugs may be present.</p>
<div id="truncateddistribution" class="section level3">
<h3 class="hasAnchor">
<a href="#truncateddistribution" class="anchor"></a>TruncatedDistribution</h3>
<p>This is perhaps the simplest wrapper in distr6. It can be constructed in one of two ways:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">N &lt;-<span class="st"> </span>Normal<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">TruncatedDistribution<span class="op">$</span><span class="kw">new</span>(N, <span class="dt">lower =</span> <span class="dv">-2</span>, <span class="dt">upper =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; TruncNorm(Norm_mean = 0, Norm_var = 1)</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="kw"><a href="../../reference/truncate.html">truncate</a></span>(N, <span class="dt">lower =</span> <span class="dv">-2</span>, <span class="dt">upper =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; TruncNorm(Norm_mean = 0, Norm_var = 1)</span></a></code></pre></div>
<p>In both cases, the result has to be saved to truncate the distribution as these are not methods in the Normal distribution class, i.e. to use the truncated normal distribution:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># This is a good example of when piping is clean and effective</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(magrittr)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">tn &lt;-<span class="st"> </span>Normal<span class="op">$</span><span class="kw">new</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../../reference/truncate.html">truncate</a></span>(<span class="op">-</span><span class="dv">2</span>,<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(tn)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; [1] "TruncatedDistribution" "DistributionWrapper"   "Distribution"         </span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; [4] "R6"</span></a></code></pre></div>
<p>In the example above we are truncating the Normal distribution between the limits -2 and 2, this updates the distribution support accordingly and re-distributes the weights of the pdf and cdf</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">tn<span class="op">$</span><span class="kw"><a href="../../reference/cdf.html">cdf</a></span>(<span class="op">-</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; [1] 0</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3">tn<span class="op">$</span><span class="kw"><a href="../../reference/cdf.html">cdf</a></span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; [1] 0.8576164</span></a></code></pre></div>
<p>By default the quantile method isn’t added, but we could impute this using the <code>FunctionImputation</code> decorator:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../../reference/decorate.html">decorate</a></span>(tn, FunctionImputation)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; tn is now decorated with FunctionImputation</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; TruncNorm(Norm_mean = 0, Norm_var = 1)</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4">tn<span class="op">$</span><span class="kw"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span>(<span class="fl">0.9121888</span>)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt; Results from numeric calculations are approximate only. Better results may be available.</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; [1] 1.245</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7">tn<span class="op">$</span><span class="kw"><a href="../../reference/cdf.html">cdf</a></span>(<span class="fl">1.245</span>) <span class="co"># As expected</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; [1] 0.9121888</span></a></code></pre></div>
</div>
<div id="productdistribution" class="section level3">
<h3 class="hasAnchor">
<a href="#productdistribution" class="anchor"></a>ProductDistribution</h3>
<p>A product distribution is a composite distribution in which two or more independent distributions are combined into a single joint distribution. Details about the maths behind this can be found in <code><a href="../../reference/ProductDistribution.html">?ProductDistribution</a></code>. For now we use this as an example of the composite distributions in distr6. Say we want the product distribution of the binomial and normal distributions,</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">N &lt;-<span class="st"> </span>Normal<span class="op">$</span><span class="kw">new</span>(<span class="dt">mean =</span> <span class="dv">2</span>, <span class="dt">var =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">B &lt;-<span class="st"> </span>Binomial<span class="op">$</span><span class="kw">new</span>(<span class="dt">size =</span> <span class="dv">5</span>, <span class="dt">prob =</span> <span class="fl">0.2</span>)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">P &lt;-<span class="st"> </span>ProductDistribution<span class="op">$</span><span class="kw">new</span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(N, B))</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(P)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt; NormXBinom(Norm_mean = 2, Norm_var = 1, Binom_prob = 0.2, Binom_size = 5)</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6">P<span class="op">$</span>description</a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; [1] "Product of:Normal Probability Distribution. Binomial Probability Distribution."</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(P)</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt; [1] "ProductDistribution" "DistributionWrapper" "Distribution"       </span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt; [4] "R6"</span></a></code></pre></div>
<p>Now we can treat <code>P</code> like any other multivariate distribution</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">P<span class="op">$</span><span class="kw"><a href="../../reference/pdf.html">pdf</a></span>(<span class="dv">1</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt; [1] 0.0495556</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3">N<span class="op">$</span><span class="kw"><a href="../../reference/pdf.html">pdf</a></span>(<span class="dv">1</span>) <span class="op">*</span><span class="st"> </span>B<span class="op">$</span><span class="kw"><a href="../../reference/pdf.html">pdf</a></span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt; [1] 0.0495556</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"></a>
<a class="sourceLine" id="cb11-6" data-line-number="6">P<span class="op">$</span><span class="kw"><a href="../../reference/cdf.html">cdf</a></span>(<span class="dv">1</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt; [1] 0.1494659</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8">N<span class="op">$</span><span class="kw"><a href="../../reference/cdf.html">cdf</a></span>(<span class="dv">1</span>) <span class="op">*</span><span class="st"> </span>B<span class="op">$</span><span class="kw"><a href="../../reference/cdf.html">cdf</a></span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt; [1] 0.1494659</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"></a>
<a class="sourceLine" id="cb11-11" data-line-number="11">P<span class="op">$</span><span class="kw"><a href="../../reference/pdf.html">pdf</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">4</span>))</a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt; [1] 0.049555604 0.001548613</span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13">P<span class="op">$</span><span class="kw"><a href="../../reference/rand.html">rand</a></span>(<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">#&gt;        Norm Binom</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co">#&gt; 1: 3.370958     1</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16"><span class="co">#&gt; 2: 1.435302     0</span></a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co">#&gt; 3: 2.363128     1</span></a></code></pre></div>
</div>
<div id="mixturedistribution" class="section level3">
<h3 class="hasAnchor">
<a href="#mixturedistribution" class="anchor"></a>MixtureDistribution</h3>
<p>A mixture distribution is a distribution with both continuous and discrete parts. It is formed by taking a weighted product of the respective distributions pdfs/cdfs. By default the weights are assumed to follow the uniform distribution, i.e. the probability of each distribution is identical, but this can be edited. Below we take the mixture of Binomial, Normal and Exponential distributions.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">N &lt;-<span class="st"> </span>Normal<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">B &lt;-<span class="st"> </span>Binomial<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">E &lt;-<span class="st"> </span>Exponential<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">M &lt;-<span class="st"> </span>MixtureDistribution<span class="op">$</span><span class="kw">new</span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(N, B, E), <span class="dt">weights =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.1</span>,<span class="fl">0.5</span>,<span class="fl">0.4</span>))</a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(M)</a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; NormMixBinomMixExp(Norm_mean = 0, Norm_var = 1, Binom_prob = 0.5, Binom_size = 10, Exp_rate = 1)</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7">M<span class="op">$</span>description</a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; [1] "Mixture of: 1) Normal Probability Distribution. And 2) Binomial Probability Distribution. And 3) Exponential Probability Distribution. - With weights: (0.1, 0.5, 0.4)"</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(M)</a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; [1] "MixtureDistribution" "DistributionWrapper" "Distribution"       </span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt; [4] "R6"</span></a></code></pre></div>
<p>Whilst mixture distributions are composites, they are still univariate:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">M<span class="op">$</span><span class="kw"><a href="../../reference/pdf.html">pdf</a></span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#&gt; [1] 0.1762317</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3">N<span class="op">$</span><span class="kw"><a href="../../reference/pdf.html">pdf</a></span>(<span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="fl">0.1</span> <span class="op">+</span><span class="st"> </span>B<span class="op">$</span><span class="kw"><a href="../../reference/pdf.html">pdf</a></span>(<span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="fl">0.5</span> <span class="op">+</span><span class="st"> </span>E<span class="op">$</span><span class="kw"><a href="../../reference/pdf.html">pdf</a></span>(<span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="fl">0.4</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; [1] 0.1762317</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5">M<span class="op">$</span><span class="kw"><a href="../../reference/cdf.html">cdf</a></span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; [1] 0.3423538</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7">M<span class="op">$</span><span class="kw"><a href="../../reference/rand.html">rand</a></span>(<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt; [1] 4.00000000 0.08143603 0.58020632 5.00000000</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq.int</a></span>(<span class="op">-</span><span class="dv">3</span>,<span class="dv">10</span>,<span class="fl">0.1</span>), <span class="dt">y =</span> M<span class="op">$</span><span class="kw"><a href="../../reference/pdf.html">pdf</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq.int</a></span>(<span class="op">-</span><span class="dv">3</span>,<span class="dv">10</span>,<span class="fl">0.1</span>)),<span class="dt">type=</span><span class="st">"l"</span>)</a></code></pre></div>
<p><img src="wrappers_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
</div>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<p>There are plenty other wrappers to explore, including vector distributions that combine distributions into one vector and array distributions that are a type of product distribution for k-dimensional distributions of a specific type. The tools learnt from this tutorial are all applicable to every other wrapper and we hope you find the rest intuitive to use. In the <a href="https://alan-turing-institute.github.io/distr6/articles/webs/sets.html">next tutorial</a> we look at how to create a custom distribution.</p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-GoF">
<p>Gamma, Erich, Richard Helm, Ralph Johnson, and John Vlissides. 1994. “Design Patterns: Elements of Reusable Object-Oriented Software.” Addison-Wesley.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#wrappers">Wrappers</a></li>
      <li><a href="#accessing-wrapped-models">Accessing Wrapped Models</a></li>
      <li><a href="#wrappers-in-distr6">Wrappers in distr6</a></li>
      <li><a href="#summary">Summary</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Raphael Sonabend, Franz Kiraly.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9100.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'c08037a20302b0f7fe5a1b7060957f04',
    indexName: 'distr6',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
